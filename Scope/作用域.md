### 作用域
#### 一、什么是作用域？
> 变量的作用范围（可以被使用的范围）称为变量作用域，变量必须在其有效范围内使用，如果超出有效范围，变量就会失去其意义。

#### 二、作用域的分类
##### （一）全局作用域
局部变量就是在函数的内部定义的变量，它只能在定义它的函数内使用。局部变量会在函数调用结束时自动销毁。

- 函数内部定义，只能在定义它的函数内使用。
- 在调用结束时自动销毁。
##### （二）局部作用域
全局变量就是定义在所有函数以外的变量，其作用域是当前源码的任何地方，但是在函数内部是不可用的。

在程序运行期间全局变量会一直存在，只有程序结束运行时才会被销毁。（程序运行结束时销毁）
##### 在局部作用域中访问全局变量
用超全局变量 $GLOBALS：
```
<?php

$global = 'global area!';
function local()
{
    $inner = 'local area!';
    // echo $global;
    var_dump($GLOBALS['global']);
}
local();
```
把全局变量当做参数传入函数内部，这样函数内部就能使用全局变量。
##### （四）全局访问局部，局部访问全局
global 关键字。
> global \$a是外部\$a的同名引用。

```
$a = 1;
function test(){
    global $a;
    unset($a);
}
test();
echo $a; // 输出：1
```
证明删除的只是别名，\$GLOBALS['a']的引用，其本身的值没有受到任何改变。

也就是说global \$a其实就相当于\$a = &\$GLOBALS['a']。调用外部变量的一个别名。

上述代码相当于
```
$a = 0;
function test1(){
    $a = &$GLOBALS['a'];
    $a = 1;
}
test1();
echo $a."\n"; // 输出：1
```

**但一旦用了&，那么变量将不再是同名引用。**
```
<?php
$a = 1;
$b = 2;
function test3(){
    global $a,$b;
    $a = $b;
}
test3();
echo $a."\n"; //输出 2
```
由于同名引用的关系，此时函数体内\$b的值为2，故而函数体内的\$a的值为2，由于函数体内\$a是对外部\$a的同名引用，故而外部\$a也就是2

```
<?php
$a = 1;
$b = 2;
function test4(){
    global $a,$b;
    $a = &$b;
}
test();
echo $a;  // 输出 1
```
由于此时函数体内\$a=&\$b;由于&的关系，故而此时函数体内的\$a已不再是对外部\$a的同名引用，所以当函数体内的\$a=2时，外部的\$a并没有改变。
#### 三、总结
对于作用域，只需了解全局/局部变量的定义、对应的作用域以及什么时候销毁。

#### 参考资料
1. [PHP中global的用法](https://blog.csdn.net/qq_19557947/article/details/77854147)